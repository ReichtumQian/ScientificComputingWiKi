
前面几节已经从理论上完全阐述了如何用多项式去逼近平方可积空间中的一个函数。但由于正交投影的系数需要进行积分运算，实际编程时会遇到不少麻烦，而一般的处理方式是引入数值积分中的高斯公式，将积分转换为离散形式进行求解。

在阅读本节前，需要熟悉：

- 数值积分-一元数值积分理论
- 数值积分-高斯积分

## 离散投影

回顾一下正交投影，计算格式为：

$$
P_nf = \sum\limits_{i = 0}^n \hat{f}_i\phi_i(x), \quad  \hat{f}_i = \frac{1}{||\phi_i||_{L^2_w}^2} \langle f, \phi_i \rangle
$$

而离散投影的思路就是将数值积分应用到 $||\phi_i||_{L_w^2}^2$ 和 $\langle f,\phi_i \rangle$ 的计算上。

> **定义**(离散投影)
>
> 对于 $f \in L_w^2(I)$ ，若 $\phi_0,\cdots, \phi_n$ 为 $\mathbb{P}_n$ 中的正交多项式，则 $f$ 在 $\mathbb{P}_n$ 的离散投影定义为
>
> $$ I_nf(x) = \sum\limits_{i = 0}^n \tilde{f}_i \phi_i(x), \quad  \tilde{f}_i = \frac{1}{\gamma_i} \sum\limits_{j = 0}^m w_j f(x_j)\phi_i(x_j)$$
>
> 这里 $w_j$ 为 $x_j$ 节点的数值积分权重， $m+1$ 表示选择的 $x$ 节点个数，$\gamma_i = \sum\limits_{j = 0}^m w_j \phi_i^2(x_j)$ 也为权重的数值积分。

注意这里数值积分节点 $x_j$ 的位置和个数没有强制性要求，但是如果要求收敛效果较好，一般采用 $\phi_n(x)$ 的零点作为数值积分节点，也就是高斯积分公式。

## 离散投影误差分析

显然离散投影极大地减少了积分运算带来的计算量（有时不用符号积分甚至还积分不出来），而我们关心的是离散投影和原本的正交投影相差多少，也就是计算

$$
||P_nf - I_nf||_{L_w^2}
$$






